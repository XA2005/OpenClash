import{u as V,d as e,ab as Z,i as t,ac as F,ad as J,F as x,ae as K,af as U,ag as u,ah as Y,ai as ee,g as C,aj as H,ak as D,al as Q,Q as te,t as v,A as L,r as P,w as re,C as ae,b as le,y as se,T as ne,$ as k,D as oe,B as A,a3 as ie,a1 as G,a4 as ce,a0 as N,a8 as de,aa as ue,m as ge}from"./index-B2UtOO5P.js";import{c as he,g as ve,a as fe,e as me,I as be,f as pe,h as W,i as $e,j as _e,r as Se}from"./index-CInhG8wh.js";import{D as xe}from"./DocumentTitle-CREjclRv.js";var Ce=v('<div class="flex flex-col gap-4"><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full">'),M=v("<option>");const we=d=>{const[a]=V();return e(te,{ref:s=>{var n;return(n=d.ref)==null?void 0:n.call(d,s)},get icon(){return e(Z,{size:24})},get title(){return a("logsSettings")},get children(){var s=Ce(),n=s.firstChild,i=n.firstChild,$=n.nextSibling,m=$.firstChild,w=$.nextSibling,b=w.firstChild;return t(n,e(F,{withDivider:!0,get children(){return a("tableSize")}}),i),i.addEventListener("change",r=>J(r.target.value)),t(i,e(x,{get each(){return Object.values(K)},children:r=>(()=>{var o=M();return o.value=r,t(o,()=>a(r)),o})()})),t($,e(F,{withDivider:!0,get children(){return a("logLevel")}}),m),m.addEventListener("change",r=>U(r.target.value)),t(m,e(x,{get each(){return[u.Info,u.Error,u.Warning,u.Debug,u.Silent]},children:r=>(()=>{var o=M();return o.value=r,t(o,()=>a(r)),o})()})),t(w,e(F,{withDivider:!0,get children(){return a("logMaxRows")}}),b),b.addEventListener("change",r=>Y(parseInt(r.target.value))),t(b,e(x,{each:ee,children:r=>(()=>{var o=M();return o.value=r,t(o,r),o})()})),C(()=>i.value=H()),C(()=>m.value=D()),C(()=>b.value=Q()),s}})};let q=1;const[ye,Le]=L([]),[O,Ie]=L(!1),Fe=()=>(P(re(D,(d,a)=>{if(d===a)return;const s=ae("logs",{level:D()});P(()=>{const n=s();!n||O()||(Le(i=>[{...n,seq:q},...i].slice(0,Q())),q++)})})),{logs:ye,paused:O,setPaused:Ie});var ke=v("<span>"),Me=v('<div class="flex h-full flex-col gap-2"><div class="join w-full"><input type=search class="input input-sm join-item input-primary flex-1 flex-shrink-0"></div><div class="overflow-x-auto whitespace-nowrap rounded-md bg-base-300"><table><thead class="sticky top-0 z-10"></thead><tbody>'),De=v("<tr>"),Re=v('<th class=bg-base-200><div class="flex items-center"><div>'),Ee=v('<tr class="hover:!bg-primary hover:text-primary-content">'),Te=v("<td class=py-2>");const B=(d,a,s,n)=>{const i=Se(d.getValue(a),s);return n({itemRank:i}),i.passed},Ae=()=>{const d=le();if(!se())return d("/setup",{replace:!0}),null;let a;const[s]=V(),[n,i]=L(""),{logs:$,paused:m,setPaused:w}=Fe(),[b,r]=ne(L([]),{name:"logsTableSorting",storage:localStorage}),o=[{header:s("sequence"),accessorFn:c=>c.seq},{header:s("type"),accessorFn:c=>c.type,cell:({row:c})=>{const p=c.original.type;let g="";switch(p){case u.Error:g="text-error";break;case u.Warning:g="text-warning";break;case u.Info:g="text-info";break;case u.Debug:g="text-success";break}return(()=>{var _=ke();return k(_,g),t(_,()=>`[${c.original.type}]`),_})()}},{header:s("payload"),accessorFn:c=>c.payload}],R=he({filterFns:{fuzzy:B},state:{get globalFilter(){return n()},get sorting(){return b()}},get data(){return $()},sortDescFirst:!0,columns:o,onGlobalFilterChange:i,onSortingChange:r,globalFilterFn:B,getFilteredRowModel:ve(),getSortedRowModel:fe(),getCoreRowModel:me()});return[e(xe,{get children(){return s("logs")}}),(()=>{var c=Me(),p=c.firstChild,g=p.firstChild,_=p.nextSibling,E=_.firstChild,T=E.firstChild,X=T.nextSibling;return g.$$input=l=>i(l.target.value),t(p,e(A,{class:"btn-primary join-item btn-sm",onClick:()=>w(l=>!l),get icon(){return oe(()=>!!m())()?e(be,{}):e(pe,{})}}),null),t(p,e(A,{class:"btn-primary join-item btn-sm",onClick:()=>a==null?void 0:a.showModal(),get icon(){return e(ie,{})}}),null),t(T,e(G,{get each(){return R.getHeaderGroups()},children:l=>{const f=l();return(()=>{var h=De();return t(h,e(G,{get each(){return f.headers},children:y=>{const S=y();return(()=>{var z=Re(),j=z.firstChild,I=j.firstChild;return ce(I,"click",S.column.getToggleSortingHandler(),!0),t(I,()=>W(S.column.columnDef.header,S.getContext())),t(j,()=>({asc:e($e,{}),desc:e(_e,{})})[S.column.getIsSorted()]??null,null),C(()=>k(I,N(S.column.getCanSort()&&"cursor-pointer select-none","flex-1"))),z})()}})),h})()}})),t(X,e(x,{get each(){return R.getRowModel().rows},children:l=>(()=>{var f=Ee();return t(f,e(x,{get each(){return l.getVisibleCells()},children:h=>(()=>{var y=Te();return t(y,()=>W(h.column.columnDef.cell,h.getContext())),y})()})),f})()})),t(c,e(we,{ref:l=>a=l}),null),C(l=>{var f=s("search"),h=N(de(H()),"table relative rounded-none");return f!==l.e&&ue(g,"placeholder",l.e=f),h!==l.t&&k(E,l.t=h),l},{e:void 0,t:void 0}),c})()]};ge(["input","click"]);export{Ae as default};
